# VIM Note

## VIM模式

VIM共有四种模式

- Normal普通模式
- Insert编辑模式
- Visual可视模式
- : 命令模式

但是这个说法存在争议，因为很多人认为`:`并不算是一种模式，而单独作为VIM命令

### 插入模式

#### 快速纠错

以下快捷键需要在Insert模式下

| 快捷键   | 说明           |
| -------- | -------------- |
| ctrl + h | 删除上一个字符 |
| ctrl + w | 删除上一个词语 |
| ctrl + u | 删除当前行     |

### Normal模式

#### 查找和替换

```
:[range] s / {pattern}/{string}/[flags]
```

range表示范围，比如`10,20`表示第10到第20行，`%`表示全部

pattern为替换的模式，s为替换

string为要替换后的文本

flags有三种

| flag      | 说明                 |
| --------- | -------------------- |
| g(lobal)  | 全局                 |
| c(onfirm) | 确认                 |
| n(numer)  | 报告次数但不进行替换 |

举例来说，要替换所有的aaa为bbb

```
:% s/aaa/bbb/g
```

要查找共有多少个匹配

:% s/aaa/bb/n

挖个坑，正则表达式匹配

## VIM 多文件操作

buffer为缓冲区，每次打开一个vim编辑就会打开一个buffer缓冲区

| 命令          | 说明                                  |
| ------------- | ------------------------------------- |
| :e            | edit，编辑文件                        |
| :ls           | 列出当前所有缓冲区                    |
| :b num        | 跳转到ls中编号为1的buffer区           |
| :b buffername | 跳转到指定名称的buffer，可以用tab补全 |
## VIM文本对象TextObject

Vim语法如下

```
[number]<command><TextObject>
```

number是次数

command是命令，比如d,y,c

textobj是要操作的文本对象，比如w(词语)，s(句子)，p(段落)



键盘`v`进入可视模式，使用i，a来匹配词语或者句子

| 操作 | 说明                       |
| ---- | -------------------------- |
| iw   | inner word 当前词语        |
| aw   | around word 但前词语和空格 |

以上为例子，也可以做如下类似操作

比如要删除大括号里面的所有东西并编辑

```
ci{
```

即可匹配change in {}

## VIM宏macro

宏可以看成是一系列命令的集合

vim使用`q`来进行录制，也用`q`来结束录制

```
qa
```

此时在左下角会提示recording a录制a

然后我们执行需要做的命令

再按住q结束

此时我们即可使用@a来播放宏

可以使用可视模式选中所有然后normal @a来对每一行执行

## VIM自动补全

使用<ctrl> + n(p)来补全关键字，n为下一个,p为上一个

使用<ctrl> + x and <ctrl> + f来补全文件名

使用<ctrl> + x and <ctrl> + o来补全代码

## VIM 快捷键

| 键位 | 说明                   |
| ---- | ---------------------- |
| Esc  | 返回Normal模式         |
| i    | 插入(Insert)           |
| a    | 当前位置后插入(append) |
| o    | 插入下一行             |
| I    | 行首插入               |
| A    | 行尾插入               |
| O    | 插入上一行             |
| p | 粘贴 |
| u | 撤销 |
| v | 进入可视模式 |
| dd | 删除 |
| yy | 复制 |
| / | 搜索 n下一个N上一个 |
| gi | 回到上次编辑的位置 |
| h | 左移 |
| j | 下移 |
| k | 上移 |
| l | 右移 |
| w | 移动到下一个单词头 |
| e | 移动到下一个单词尾 |
| b | 回到上一个单词头 |
| W | 移动到下一个空白符分割头 |
| E | 移动到下一个空白符分割尾 |
| B | 回到上一个空白符分割头 |
| f{char} | 搜索到当前行游标后的char字母，使用`;`下一个，使用`,`上一个 |
| F{char} | 搜索到当前行游标钱的char字母，使用`;`下一个，使用`,`上一个 |
| 0 | 移动到行首 |
| ^ | 移动到第一个非空字符 |
| $ | 移动到行尾 |
| _g | 移动到行尾非空字符 |
| gg | 移动到开头 |
| G | 移动到结尾 |
| H | 跳转到屏幕开头(Header) |
| M | 跳转到屏幕中间(Middle) |
| L | 跳转到屏幕结尾(Lower) |
| zz | 将当前行放在中间 |
| ctrl + u | 向上翻页 |
| ctrl + f | 向下翻页 |
| x | 删除一个字符 |
| d | 配合文本对象删除，dw删除单词，dd删除整行，dt)删除括号内delete to ) |
| r | 替换一个字符，ra将当前字符替换为a |
| c | 替换并进入insert |
| R | 进行连续替换，类似于Windows的Inset功能 |
| C | 删除整行并进入Insert |


## VIM Command

| 命令 | 说明 |
| ---- | ---- |
| :w   | 保存 |
| :q   | 推出 |

